<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tipos de emergencia</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- Paleta de colores -->
    <link rel="stylesheet" href="../../assets/css/paleta_colores.css">

    <!-- Archivo de configuración JS -->
    <script src="../../assets/javascript/config.js" defer></script>

    <!-- Cabecera y pie de página -->
    <script src="../../assets/javascript/header_footer.js" defer></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<!-- a -->
    <body class="bg-white text-dark">
        <main>
            <div id="map" style="height: 500px; width: 100%;"></div>

            <script>
                // Inicializar mapa
                let map = L.map('map').setView([40.4168, -3.7038], 13);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                }).addTo(map);

                // Función para añadir incidencias
                function agregarIncidencia(lat, lon, nombre, descripcion,funcionario) {
                    L.marker([lat, lon])
                        .addTo(map)
                        .bindPopup(`<b>${nombre}</b><br>${descripcion}<br>Funcionario: ${funcionario}`);
                }

                // Ejemplos
                agregarIncidencia(40.417, -3.703, "Incendio en vivienda", "Fuego en un tercer piso, 2 unidades enviadas");
                agregarIncidencia(40.410, -3.700, "Falsa alarma", "Descripción de ejemplo");

                // Evento: click para crear incidencia
                map.on('click', function(e) {
                    let lat = e.latlng.lat;
                    let lon = e.latlng.lng;

                    let nombre = prompt("Nombre de la incidencia:");
                    let descripcion = prompt("Descripción de la incidencia:");

                    if (nombre && descripcion) {
                        agregarIncidencia(lat, lon, nombre, descripcion);
                    }
                });
            </script>
        </main>
        <footer>
            <!-- Contenedor para footer -->
            <div id="footer-placeholder"></div>
        </footer>
    </body>
</html>
